---
permalink: /:categories/:year/:month/:title.html
layout: post
title: Simple Scala dependency injection with Scaldi (part 1)
date: '2015-08-25T16:47:00.000-07:00'
author: Andres Olarte
tags:
- scaldi
- dependency injection
- scala
modified_time: '2015-08-25T16:54:38.076-07:00'
blogger_id: tag:blogger.com,1999:blog-3306197464901287625.post-1474548277654738717
blogger_orig_url: http://www.javaprocess.com/2015/08/simple-scala-dependency-injection-with.html
---

<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://www.scala-lang.org/resources/img/smooth-spiral.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://www.scala-lang.org/resources/img/smooth-spiral.png" height="200" width="135" /></a></div>Dependency Inject is a very useful pattern in most medium to larger projects. However, it's also sometimes useful in smaller projects. In smaller projects, I normally prefer to use appropriately smaller frameworks. In the case of Scala, <a href="http://scaldi.org/">Scaldi</a> provides a very lightweight dependency injection mechanism.<br />Whenever I try to learn a new framework, I always like to learn my way up from a very simple example. The following is close to the absolute minimum example I could write to get Scaldi working. From this very simple example I will continue to add other useful features, such as testing and integration with other frameworks.<br /><br />The build.sbt is very simple, we just added a single dependency:<br /><pre class="brush: text">name := "scaldi-test"<br /><br />version := "1.0"<br /><br />scalaVersion := "2.11.6"<br /><br />libraryDependencies += "org.scaldi" %% "scaldi" % "0.5.6"<br /></pre>The main Scala file is shown next, and contains all of the necessary parts to get Scaldi working: <br /><pre class="brush: scala">import scaldi.{Injector, Injectable, Module}<br /><br />object HelloScaldi {<br />  def main(args: Array[String]) {<br /><br />    val test=new Test;<br />    test.run<br />  }<br />}<br /><br />class Test( )  extends Injectable {<br />  def run: Unit = {<br />    implicit  val injector:Injector = new UserModule //1<br />    val output:IService=inject[IService] //2<br />    println(output.execute("Scaldi"));<br />  }<br />}<br /><br />class UserModule extends Module { //3<br />  bind [ITransport] to new MessageTransport //4<br />  bind [IService] to  new MessageService(inject[ITransport]) //5<br /><br />}<br /><br />trait ITransport {<br />  def send(s: String)<br />}<br /><br />trait IService {<br />  def execute(x: String): String<br />}<br /><br />class MessageService(transport:ITransport) extends IService {<br /><br />  override def execute(x: String): String = {<br />    val ret="Hello " + x<br />    transport.send(ret)<br />    return  ret<br />  }<br />}<br /><br />class MessageTransport() extends ITransport {<br />  override def send(s: String) = println("Sending message: " + s)<br />}<br /><br /><br /></pre><br /><br /><ol><li>In this line, we create an Injector using a new UserModule. The injector is the entry point into the DI container. The Module defines the bindings that will be using for the injection</li><li>The inject method uses the implicit Injector to provide us with the object bound to trait IService.</li><li>The Module provides explicit bindings.</li><li>In this line, we bind ITransport to a new instance of MessageTransport</li><li>The trait IService is bound to a new instance of MessageService, in which we're injecting ITransport. This allows us to keep MessageService and MessageTransport decoupled.</li></ol>This simple example can be executed using sbt: <br /><pre class="brush: bash">sbt run</pre>The output will look something like this: <br /><pre class="brush: text">[info] Running HelloScaldi <br />Sending message: Hello Scaldi<br />Hello Scaldi<br />[success] Total time: 2 s, completed Aug 25, 2015 7:40:23 PM<br /></pre><br />As you can see, the example is very simple, but if you want to start from the ground up, hopefully this will give you a good starting point.  If you have any questions, don't hesitate to leave a comment.  <br />You can check out the full source code <a href="https://github.com/aolarte/scaldi-test">here</a>.